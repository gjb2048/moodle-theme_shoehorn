define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Shoehorn fitvids AMD"),a.fn.fitVids=function(c){var d={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var e=document.head||document.getElementsByTagName("head")[0],f=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",g=document.createElement("div");g.innerHTML='<p>x</p><style id="fit-vids-style">'+f+"</style>",e.appendChild(g.childNodes[1])}return c&&a.extend(d,c),this.each(function(){var c=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];d.customSelector&&c.push(d.customSelector);var e=".fitvidsignore";d.ignore&&(e=e+", "+d.ignore);var f=a(this).find(c.join(","));f=f.not("object object"),f=f.not(e),f.each(function(){var c=a(this);if(b.debug("FitVids attempt on: "+c.prop("outerHTML")),c.parents(e).length>0)return void b.debug("FitVids not on (ignoreList)");var d=c.attr("id");if(d){if("onlineaudiorecorder"===d)return void b.debug("FitVids not on (onlineaudiorecorder)");if(d.indexOf("mp3")>=0)return void b.debug("FitVids not on (core media mp3)")}if(b.debug("FitVids attempt successful"),!("embed"===this.tagName.toLowerCase()&&c.parent("object").length||c.parent(".fluid-width-video-wrapper").length)){c.css("height")||c.css("width")||!isNaN(c.attr("height"))&&!isNaN(c.attr("width"))||(c.attr("height",9),c.attr("width",16));var f="object"===this.tagName.toLowerCase()||c.attr("height")&&!isNaN(parseInt(c.attr("height"),10))?parseInt(c.attr("height"),10):c.height(),g=isNaN(parseInt(c.attr("width"),10))?c.width():parseInt(c.attr("width"),10),h=f/g;if(!c.attr("id")){var i="fitvid"+Math.floor(999999*Math.random());c.attr("id",i)}c.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*h+"%"),c.removeAttr("height").removeAttr("width")}})})},{init:function(){a(document).ready(function(a){a("#page").fitVids()}),b.debug("Shoehorn fitvids AMD init")}}});